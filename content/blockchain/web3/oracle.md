+++
title = 'Oracle'
date = 2024-03-25T21:20:43+08:00
+++

## 什么是预言机？区块链为何需要预言机？
区块链（公有链）世界和现实世界是完全隔离的两个世界。区块链系统可以被视为一个确定性系统，其中所有节点遵循相同的规则和协议来执行交易和达成共识。在这个过程中，每个节点都要进行确定性操作，即对于相同的输入数据，所有节点都会得到相同的输出结果。**这种确定性操作保证了去中心化的共识过程的有效性和安全性**。

然而，当涉及到接收外部数据时，情况就变得不确定了。由于外部数据可能因来源、时间和其他因素的不同而产生差异，各个节点在获取和处理外部数据时可能面临不确定性操作。**这种不确定性操作可能导致节点之间的数据不一致，从而影响共识过程，所以区块链本身无法主动获取来自外部的数据**。

尽管区块链在很多方面具有革命性的潜力，尤其是像以太坊这样的可编程区块链，但如果其作为一个封闭的系统不与外界产生链接，那么它无法实现其全部价值，就像一台没有连接互联网的电脑。只有让区块链技术真正焕发生机，与外部世界连接起来使链上的智能合约能够访问和响应现实世界的数据，让智能合约真正应用在现实中，这样 Web3 才能真正走向大众。

而预言机就是负责连接区块链和现实世界的桥梁，以此来**实现区块链和现实世界的数据互通**。**预言机负责将外部数据安全、准确且可信地引入区块链系统**。通过预言机，区块链系统可以在**保持确定性操作的基础上，获取和利用外部数据**，从而实现更广泛的应用和功能。

即**预言机是将链下的数据喂给链上以保证数据准确性的工具**。

## 预言机应用场景
作为连接区块链和现实世界的桥梁，可以说只要是可以和现实世界数据相关的应用都可以是预言机的应用场景，比如：保险、供应链、预测市场、物联网、稳定币、游戏以及 DeFi 等等，

以下是预言机的一些典型应用场景：
+ 去中心化金融（DeFi）：预言机在 DeFi 领域发挥着关键作用，为借贷、衍生品交易、保险、RWA 等应用提供实时的金融市场数据。例如，AAVE 和 Synthetix 等项目依赖预言机提供准确的价格数据，以确保系统内资产的正确估值和风险管理。 
+ 保险：预言机可以为链上保险项目提供现实世界的事件数据，如天气状况、自然灾害等，从而触发保险合约中的赔付条款。 
+ 预测市场：预言机为预测市场提供实时的结果数据，使用户能够在区块链上进行投注和交易，预测政治选举、体育比赛等事件的结果。 
+ 物联网（IoT）：预言机可以将物联网设备收集到的数据传递给智能合约，实现自动化的数据交换和决策。例如，供应链管理系统可以利用预言机获取实时的货物追踪信息，提高效率和透明度。 
+ 稳定币：预言机为稳定币项目提供实时的外汇数据，以确保稳定币与其挂钩的法定货币保持稳定的汇率关系。 
+ 游戏与非同质化代币（NFT）：预言机为游戏和 NFT 项目提供随机数生成服务，如 Chainlink 的 VRF（可验证随机函数），从而实现公平和透明的概率事件。 
+ 跨链：预言机在跨链领域作为数据和资产交换的关键支持，促进不同区块链网络之间的互操作，包括资产转移、数据共享、智能合约触发以及身份认证与隐私保护。

## 预言机种类
### 中心化预言机

![img.png](/images/blockchain/web3/oracle-1.png)

![img.png](/images/blockchain/web3/oracle-2.png)

中心化预言机有可能网络故障宕机，或者是采取的数据源太过单一（数据源出问题，输入的数据也会出问题），其次，中心化预言机可能会看到链上的合约，从而伪造对于自己有利的数据。

### 去中心化预言机

![img.png](/images/blockchain/web3/oracle-3.png)

多个数据节点形成去中心化预言机网络，每个节点都会收集数据，达成共识后输入到区块链上的智能合约。
共识的方式有很多种，可能是取平均数，也可能类似比赛打分，去掉一个最高分和去掉一个最低分再平均，或者是取中位数等等。
1. 技术上，避免了单点失败风险
2. 数据上，通过网络对多个数据源进行验证
